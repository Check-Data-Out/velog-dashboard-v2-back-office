# =============================================================================
# Docker Compose - Stats Refresh Consumer (Base)
# =============================================================================
# Local:  docker compose up -d
#         → override.yml 자동 로드 (db + consumer, env_file: .env)
#
# Prod:   docker compose -f docker-compose.yaml -f docker-compose.prod.yml up -d
#         → prod.yml 로드 (consumer만, env_file: .env.prod)
# =============================================================================

services:
  stats-refresh-consumer:
    image: stats-refresh-consumer:latest
    build:
      context: .
      dockerfile: Dockerfile.consumer
    container_name: stats-refresh-consumer
    environment:
      DJANGO_SETTINGS_MODULE: backoffice.settings.consumer
    restart: unless-stopped
    volumes:
      - ./logs:/app/logs
    command: python -m consumer.stats_refresh_consumer
